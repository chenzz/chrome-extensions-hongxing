(function(){var n,e;n=["angular","core/services/storage","core/services/pageUtils","core/services/timeUtils","background/module","background/services/track"],e=function(n){var notificationManager;return notificationManager=function($rootScope,$translate,storage,server,timeUtils,pageUtils,track,ROLES,SERVER){var n,e,i,o;return chrome.notifications?(i={},n=function(){return server.on("notification",function(n){return chrome.notifications.create("",n.option,function(e){return i[e]=n}),track.event("notification",n.type,"show")}),chrome.notifications.onClicked.addListener(function(n){var e;return(e=i[n])?(pageUtils.openUrl("options"===e.url?"options.html":e.url),track.event("notification",e.type,"click")):void 0}),chrome.notifications.onButtonClicked.addListener(function(n,e){var o,r;return(r=i[n])?(o=r.options.buttons[e].title,"Please Renew VIP"===r.type&&storage.set("disableNotifyRenewVIP",!0),track.event("notification",r.type,"button-click:"+o)):void 0}),server.on("profile",function(){return setTimeout(function(){var n,i,r;if((null!=(n=$rootScope.user)?n.role:void 0)===ROLES.USER){if(null!=(i=$rootScope.user)&&null!=(r=i.profile)?r.until:void 0){if(storage.get("disableNotifyRenewVIP"))return;return o()}return e()}})})},e=function(){var n,e,o;return n={options:{title:$translate.instant("notifications.create_vip.title"),message:$translate.instant("notifications.create_vip.message"),contextMessage:$translate.instant("notifications.create_vip.contextMessage"),type:"basic",iconUrl:"img/logo.png"},type:"Please Create VIP",url:"https://"+SERVER+"/pay/index?name="+(null!=(e=$rootScope.user)&&null!=(o=e.profile)?o.name:void 0)},chrome.notifications.create("notifyCreateVIP",n.options,function(e){return i[e]=n}),track.event("notification",n.type,"show")},o=function(){var n,e,o;return n={options:{title:$translate.instant("notifications.renew_vip.title"),message:$translate.instant("notifications.renew_vip.message"),contextMessage:$translate.instant("notifications.renew_vip.contextMessage"),buttons:[{title:$translate.instant("notifications.renew_vip.button_title")}],type:"basic",iconUrl:"img/logo.png"},type:"Please Renew VIP",url:"https://"+SERVER+"/pay/index?name="+(null!=(e=$rootScope.user)&&null!=(o=e.profile)?o.name:void 0)},chrome.notifications.create("notifyRenewVIP",n.options,function(e){return i[e]=n}),track.event("notification",n.type,"show")},n(),this):this},n.module("background").service("notificationManager",notificationManager)},define(n,e)}).call(this);